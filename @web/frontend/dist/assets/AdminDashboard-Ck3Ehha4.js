import{j as e,u as B,r as g,a as v,b as Y,c as f,d as J,L as q,f as y,e as C,g as L,h as $}from"./index-DffnkPN2.js";/* empty css              */const S=({title:n,value:r,icon:x})=>e.jsxs("div",{className:"summary-card group",children:[e.jsx("div",{className:"summary-card-icon",children:x}),e.jsx("h3",{className:"summary-card-title",children:n}),e.jsx("p",{className:"summary-card-value",children:r}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-blue-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),K=({reviews:n,meta:r,loading:x,onFilter:m,onPageChange:p})=>{B();const[s,l]=g.useState({search:"",rating:"",sortBy:"created_at",sortOrder:"desc"}),h=t=>{const{name:a,value:u}=t.target;l(j=>({...j,[a]:u}))},i=t=>{t.preventDefault(),m(s)},c=t=>{const a=s.sortBy===t&&s.sortOrder==="asc"?"desc":"asc";l(u=>({...u,sortBy:t,sortOrder:a})),m({...s,sortBy:t,sortOrder:a})},o=t=>{const a=[];for(let u=0;u<5;u++)a.push(e.jsx("svg",{className:`w-5 h-5 ${u<t?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118l-2.8-2.034c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},u));return e.jsx("div",{className:"flex",children:a})};return x?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):e.jsxs("div",{className:"admin-table-wrapper",children:[e.jsx("form",{onSubmit:i,className:"admin-filters",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx("input",{type:"text",name:"search",value:s.search,onChange:h,placeholder:"Search reviews...",className:"admin-filter-input"})}),e.jsx("div",{className:"w-[200px]",children:e.jsxs("select",{name:"rating",value:s.rating,onChange:h,className:"admin-filter-input",children:[e.jsx("option",{value:"",children:"All Ratings"}),e.jsx("option",{value:"5",children:"5 Stars"}),e.jsx("option",{value:"4",children:"4 Stars"}),e.jsx("option",{value:"3",children:"3 Stars"}),e.jsx("option",{value:"2",children:"2 Stars"}),e.jsx("option",{value:"1",children:"1 Star"})]})}),e.jsxs("button",{type:"submit",className:"admin-button",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Filter"]})]})}),e.jsx("div",{className:"admin-table-container",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{className:"admin-table-header",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>c("id"),className:"cursor-pointer",children:["ID",s.sortBy==="id"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("user_name"),className:"cursor-pointer",children:["User",s.sortBy==="user_name"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("rating"),className:"cursor-pointer",children:["Rating",s.sortBy==="rating"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsx("th",{children:"Comment"}),e.jsxs("th",{onClick:()=>c("created_at"),className:"cursor-pointer",children:["Date",s.sortBy==="created_at"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{className:"admin-table-body",children:n.map(t=>e.jsxs("tr",{className:"admin-table-row",children:[e.jsx("td",{className:"admin-table-cell",children:t.id}),e.jsx("td",{className:"admin-table-cell",children:t.user_name}),e.jsx("td",{className:"admin-table-cell",children:o(t.rating)}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("div",{className:"max-w-xs truncate",children:t.comment})}),e.jsx("td",{className:"admin-table-cell",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:()=>{},className:"admin-button-secondary",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]})})})]},t.id))})]})}),r&&e.jsxs("div",{className:"admin-pagination",children:[e.jsx("button",{onClick:()=>p(r.current_page-1),disabled:r.current_page===1,className:"admin-pagination-button",children:"Previous"}),e.jsxs("span",{className:"text-sm text-slate-700",children:["Page ",r.current_page," of ",r.last_page]}),e.jsx("button",{onClick:()=>p(r.current_page+1),disabled:r.current_page===r.last_page,className:"admin-pagination-button",children:"Next"})]})]})},Q=({bugReports:n,meta:r,loading:x,onFilter:m,onPageChange:p})=>{B();const[s,l]=g.useState({search:"",status:"",severity:"",sortBy:"created_at",sortOrder:"desc"}),h=a=>{const{name:u,value:j}=a.target;l(_=>({..._,[u]:j}))},i=a=>{a.preventDefault(),m(s)},c=a=>{const u=s.sortBy===a&&s.sortOrder==="asc"?"desc":"asc";l(j=>({...j,sortBy:a,sortOrder:u})),m({...s,sortBy:a,sortOrder:u})},o=a=>{switch(a==null?void 0:a.toLowerCase()){case"open":return"status-badge-warning";case"in progress":return"status-badge-info";case"resolved":return"status-badge-success";case"closed":return"status-badge-inactive";default:return"status-badge-default"}},t=a=>{switch(a==null?void 0:a.toLowerCase()){case"critical":return"status-badge-danger";case"high":return"status-badge-warning";case"medium":return"status-badge-info";case"low":return"status-badge-success";default:return"status-badge-default"}};return x?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):e.jsxs("div",{className:"admin-table-wrapper",children:[e.jsx("form",{onSubmit:i,className:"admin-filters",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx("input",{type:"text",name:"search",value:s.search,onChange:h,placeholder:"Search bug reports...",className:"admin-filter-input"})}),e.jsx("div",{className:"w-[150px]",children:e.jsxs("select",{name:"status",value:s.status,onChange:h,className:"admin-filter-input",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]})}),e.jsx("div",{className:"w-[150px]",children:e.jsxs("select",{name:"severity",value:s.severity,onChange:h,className:"admin-filter-input",children:[e.jsx("option",{value:"",children:"All Severity"}),e.jsx("option",{value:"critical",children:"Critical"}),e.jsx("option",{value:"high",children:"High"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"low",children:"Low"})]})}),e.jsxs("button",{type:"submit",className:"admin-button",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Filter"]})]})}),e.jsx("div",{className:"admin-table-container",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{className:"admin-table-header",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>c("id"),className:"cursor-pointer",children:["ID",s.sortBy==="id"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("user_name"),className:"cursor-pointer",children:["User",s.sortBy==="user_name"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("title"),className:"cursor-pointer",children:["Title",s.sortBy==="title"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("status"),className:"cursor-pointer",children:["Status",s.sortBy==="status"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("severity"),className:"cursor-pointer",children:["Severity",s.sortBy==="severity"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("created_at"),className:"cursor-pointer",children:["Date",s.sortBy==="created_at"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{className:"admin-table-body",children:n.map(a=>e.jsxs("tr",{className:"admin-table-row",children:[e.jsx("td",{className:"admin-table-cell",children:a.id}),e.jsx("td",{className:"admin-table-cell",children:a.user_name}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("div",{className:"max-w-xs truncate",children:a.title})}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("span",{className:`status-badge ${o(a.status)}`,children:a.status})}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("span",{className:`status-badge ${t(a.severity)}`,children:a.severity})}),e.jsx("td",{className:"admin-table-cell",children:new Date(a.created_at).toLocaleDateString()}),e.jsx("td",{className:"admin-table-cell",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>{},className:"admin-button-secondary",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),e.jsxs("button",{onClick:()=>{},className:"admin-button",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Update"]})]})})]},a.id))})]})}),r&&e.jsxs("div",{className:"admin-pagination",children:[e.jsx("button",{onClick:()=>p(r.current_page-1),disabled:r.current_page===1,className:"admin-pagination-button",children:"Previous"}),e.jsxs("span",{className:"text-sm text-slate-700",children:["Page ",r.current_page," of ",r.last_page]}),e.jsx("button",{onClick:()=>p(r.current_page+1),disabled:r.current_page===r.last_page,className:"admin-pagination-button",children:"Next"})]})]})},X=({surveys:n,meta:r,loading:x,onFilter:m,onPageChange:p})=>{B();const[s,l]=g.useState({search:"",status:"",sortBy:"created_at",sortOrder:"desc"}),h=t=>{const{name:a,value:u}=t.target;l(j=>({...j,[a]:u}))},i=t=>{t.preventDefault(),m(s)},c=t=>{const a=s.sortBy===t&&s.sortOrder==="asc"?"desc":"asc";l(u=>({...u,sortBy:t,sortOrder:a})),m({...s,sortBy:t,sortOrder:a})},o=t=>{switch(t){case"completed":return"status-badge-success";case"in_progress":return"status-badge-warning";case"pending":return"status-badge-info";default:return"status-badge-default"}};return x?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):e.jsxs("div",{className:"admin-table-wrapper",children:[e.jsx("form",{onSubmit:i,className:"admin-filters",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx("input",{type:"text",name:"search",value:s.search,onChange:h,placeholder:"Search surveys...",className:"admin-filter-input"})}),e.jsx("div",{className:"w-[200px]",children:e.jsxs("select",{name:"status",value:s.status,onChange:h,className:"admin-filter-input",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"pending",children:"Pending"})]})}),e.jsxs("button",{type:"submit",className:"admin-button",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Filter"]})]})}),e.jsx("div",{className:"admin-table-container",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>c("id"),className:"cursor-pointer hover:bg-slate-50",children:["ID",s.sortBy==="id"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("user_name"),className:"cursor-pointer hover:bg-slate-50",children:["User",s.sortBy==="user_name"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("hardware_type"),className:"cursor-pointer hover:bg-slate-50",children:["Hardware Type",s.sortBy==="hardware_type"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("status"),className:"cursor-pointer hover:bg-slate-50",children:["Status",s.sortBy==="status"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("created_at"),className:"cursor-pointer hover:bg-slate-50",children:["Created At",s.sortBy==="created_at"&&e.jsx("span",{className:"ml-1",children:s.sortOrder==="asc"?"↑":"↓"})]}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:n.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.user_name}),e.jsx("td",{children:t.hardware_type}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${o(t.status)}`,children:t.status})}),e.jsx("td",{children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{children:e.jsxs("button",{onClick:()=>{},className:"admin-button-secondary",children:[e.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]})})]},t.id))})]})}),r&&e.jsxs("div",{className:"admin-pagination",children:[e.jsx("button",{onClick:()=>p(r.current_page-1),disabled:r.current_page===1,className:"admin-button-secondary",children:"Previous"}),e.jsxs("span",{className:"admin-pagination-text",children:["Page ",r.current_page," of ",r.last_page]}),e.jsx("button",{onClick:()=>p(r.current_page+1),disabled:r.current_page===r.last_page,className:"admin-button-secondary",children:"Next"})]})]})},Z=({data:n})=>{var p;const r=g.useMemo(()=>{try{if(!n||!Array.isArray(n)||n.length===0)return{labels:[],values:[]};const s=[...n].filter(o=>o&&o.created_at).sort((o,t)=>{try{return new Date(o.created_at)-new Date(t.created_at)}catch{return 0}}),l={};s.forEach(o=>{try{const t=new Date(o.created_at);if(isNaN(t.getTime()))return;const a=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;l[a]||(l[a]=0),l[a]++}catch(t){console.error("Error processing item:",t)}});const h=Object.keys(l);if(h.length===0)return{labels:[],values:[]};const i=h.map(o=>{try{const[t,a]=o.split("-");return`${a}/${t}`}catch{return o}}),c=Object.values(l);return{labels:i,values:c}}catch(s){return console.error("Error processing chart data:",s),{labels:[],values:[]}}},[n]),x=g.useMemo(()=>{try{return!r.values||!Array.isArray(r.values)||r.values.length===0?1:Math.max(...r.values,1)}catch(s){return console.error("Error calculating max value:",s),1}},[r.values]),m=((p=r.labels)==null?void 0:p.length)||0;if(!r||!r.labels||!r.values||!Array.isArray(r.labels)||!Array.isArray(r.values)||r.labels.length===0)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-slate-500",children:"No user growth data available"})});try{return e.jsxs("div",{className:"chart-container h-64",children:[e.jsx("h3",{className:"text-md font-medium text-slate-700 mb-3",children:"User Growth"}),e.jsxs("div",{className:"relative h-52 w-full",children:[[...Array(5)].map((s,l)=>e.jsx("div",{className:"absolute w-full border-t border-slate-200 left-0 z-0",style:{bottom:`${l/4*100}%`,borderStyle:l===0?"solid":"dashed"},children:e.jsx("span",{className:"absolute -left-6 -top-2 text-xs text-slate-500",children:Math.round(x*l/4)})},`grid-${l}`)),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 top-0 flex items-end justify-between px-6",children:r.labels.map((s,l)=>{const h=r.values[l]||0,i=x>0?h/x*100:0;return e.jsxs("div",{className:"group flex flex-col items-center",style:{width:`${m>0?100/(m+1):100}%`},children:[e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 mb-2 px-2 py-1 bg-white rounded shadow-md text-xs",children:[h," users"]}),e.jsx("div",{className:"w-full max-w-[30px] bg-gradient-to-t from-indigo-500 to-indigo-400 rounded-t-md transition-all duration-500 ease-out",style:{height:`${i}%`,minHeight:"4px"},children:e.jsx("div",{className:"h-full w-full bg-indigo-300/30 rounded-t-md opacity-0 group-hover:opacity-100 transition-opacity duration-200"})}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:s||""})]},`bar-${l}`)})})]})]})}catch(s){return console.error("Error rendering UserGrowthChart:",s),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-slate-500",children:"Error displaying chart. Please try again later."})})}},ee=()=>{const[n,r]=g.useState(!1),[x,m]=g.useState(null);return{exportData:async(s,l="csv")=>{var h;r(!0),m(null);try{let i;switch(s){case"reviews":i=await v.exportReviews(l);break;case"bugReports":i=await v.exportBugReports(l);break;case"surveys":i=await v.exportHardwareSurveys(l);break;default:throw new Error(`Unknown export type: ${s}`)}const c=`${s}_${new Date().toISOString().split("T")[0]}.${l}`,o=new Blob([i.data],{type:l==="csv"?"text/csv":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),t=window.URL.createObjectURL(o),a=document.createElement("a");return a.href=t,a.download=c,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t),a.remove(),r(!1),!0}catch(i){if(console.error("Export error:",i),(h=i.response)!=null&&h.data)try{if(i.response.data instanceof Blob){const c=await new Response(i.response.data).text(),o=JSON.parse(c);m(o.message||`Export failed: ${i.message}`)}else m(i.response.data.message||`Export failed: ${i.message}`)}catch{m(`Export failed: ${i.message}`)}else m(`Export failed: ${i.message}`);return r(!1),!1}},loading:n,error:x}},le=()=>{const n=B(),r=Y(),{list:x,meta:m,loading:p,error:s}=f(d=>d.reviews),{list:l,meta:h,loading:i,error:c}=f(d=>d.bugReports),{list:o,meta:t,loading:a,error:u}=f(d=>d.surveys),{list:j,loading:_,error:M}=f(d=>d.userGrowth),{showToast:N}=J(),{exportData:w,loading:k,error:R}=ee(),{isAuthenticated:se,user:ae}=f(d=>d.auth),[U,D]=g.useState(!1),[W,z]=g.useState(!0);g.useEffect(()=>{(async()=>{var E;try{if(await v.ensureCSRF(),console.log("Checking admin authentication status..."),!localStorage.getItem("token")){console.error("No authentication token found"),N("Please log in first","error"),r("/login");return}try{const b=await v.checkAdminSession();if(console.log("Admin session check response:",b.data),b.data.authenticated&&b.data.is_admin){console.log("Admin authentication confirmed"),D(!0),n(y()),n(C()),n(L()),n($());return}}catch(b){console.error("Admin session check failed:",b)}const A=await v.checkAuthStatus();console.log("General auth check response:",A.data);const I=((E=A.data.user)==null?void 0:E.is_admin)===!0;if(!(A.data.authenticated===!0)){console.error("User is not authenticated for admin dashboard"),N("Please log in as an admin to access this page","error"),r("/login");return}if(!I){console.error("User is authenticated but not an admin"),N("You do not have admin privileges","error"),r("/");return}console.log("Admin authentication confirmed through fallback"),D(!0),n(y()),n(C()),n(L()),n($())}catch(O){console.error("Error checking admin auth:",O),N("Authentication error: "+(O.message||"Unknown error"),"error"),r("/login")}finally{z(!1)}})()},[n,r,N]);const P=d=>n(y(d)),F=d=>n(y({...m,page:d})),G=d=>n(C(d)),T=d=>n(C({...h,page:d})),V=d=>n(L(d)),H=d=>n(L({...t,page:d}));return W?e.jsx("div",{className:"admin-container flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"admin-loading-spinner mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-slate-600 font-medium",children:"Verifying admin access..."})]})}):U?e.jsxs("div",{className:"admin-container",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-blue-500 bg-clip-text text-transparent",children:"Admin Dashboard"}),e.jsx("div",{className:"flex gap-4",children:e.jsxs(q,{to:"/admin/users",className:"admin-button",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Manage Users"]})})]}),e.jsxs("div",{className:"admin-grid",children:[e.jsx(S,{title:"Total Reviews",value:x.length,icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),e.jsx(S,{title:"Bug Reports",value:l.length,icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx(S,{title:"Surveys",value:o.length,icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),e.jsx(S,{title:"New Users",value:j.length,icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"admin-chart-container",children:[e.jsx("h2",{className:"admin-chart-title",children:"User Growth"}),_?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):M?e.jsx("div",{className:"admin-error",children:e.jsx("p",{className:"admin-error-message",children:M})}):e.jsx(Z,{data:j})]}),e.jsx("div",{className:"admin-chart-container",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"admin-chart-title",children:"Recent Activity"}),e.jsxs("button",{className:"export-button",onClick:()=>w("activity","csv"),disabled:k,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"admin-table-container",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Recent Reviews"}),e.jsxs("button",{className:"export-button",onClick:()=>w("reviews","csv"),disabled:k,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]})]}),p?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):s?e.jsx("div",{className:"admin-error",children:e.jsx("p",{className:"admin-error-message",children:s})}):e.jsx(K,{reviews:x,meta:m,loading:p,onFilter:P,onPageChange:F})]}),e.jsxs("div",{className:"admin-table-container",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Bug Reports"}),e.jsxs("button",{className:"export-button",onClick:()=>w("bugReports","csv"),disabled:k,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]})]}),i?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):c?e.jsx("div",{className:"admin-error",children:e.jsx("p",{className:"admin-error-message",children:c})}):e.jsx(Q,{bugReports:l,meta:h,loading:i,onFilter:G,onPageChange:T})]})]}),e.jsxs("div",{className:"admin-table-container mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-800",children:"Hardware Surveys"}),e.jsxs("button",{className:"export-button",onClick:()=>w("surveys","csv"),disabled:k,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]})]}),a?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):u?e.jsx("div",{className:"admin-error",children:e.jsx("p",{className:"admin-error-message",children:u})}):e.jsx(X,{surveys:o,meta:t,loading:a,onFilter:V,onPageChange:H})]}),R&&e.jsx("div",{className:"admin-error mt-4",children:e.jsx("p",{className:"admin-error-message",children:R})})]}):null};export{le as default};
