import{u as w,c as m,d as _,r as x,i as d,j as e,L as A}from"./index-DlXieois.js";/* empty css              */const L=()=>{const l=w(),j=m(s=>{var a;return((a=s.adminUsers)==null?void 0:a.users)||[]}),b=m(s=>{var a;return((a=s.adminUsers)==null?void 0:a.loading)||!1}),p=m(s=>{var a;return((a=s.adminUsers)==null?void 0:a.error)||null}),r=m(s=>{var a;return((a=s.adminUsers)==null?void 0:a.meta)||null}),{showToast:i}=_(),[t,g]=x.useState({search:"",role:"",status:"",sortBy:"created_at",sortOrder:"desc"}),[o,h]=x.useState({show:!1,userId:null,action:null,targetState:null});x.useEffect(()=>{try{l(d())}catch(s){console.error("Error fetching users:",s),i("Failed to load users","error")}},[l,i]);const u=s=>{const{name:a,value:n}=s.target;g(C=>({...C,[a]:n}))},f=s=>{s.preventDefault();try{l(d(t))}catch(a){console.error("Error applying filters:",a),i("Failed to filter users","error")}},c=s=>{const a=t.sortBy===s&&t.sortOrder==="asc"?"desc":"asc";g(n=>({...n,sortBy:s,sortOrder:a}));try{l(d({...t,sortBy:s,sortOrder:a}))}catch(n){console.error("Error sorting users:",n),i("Failed to sort users","error")}},v=s=>{try{l(d({...t,page:s}))}catch(a){console.error("Error changing page:",a),i("Failed to change page","error")}},N=(s,a,n)=>{h({show:!0,userId:s,action:a,targetState:n})},y=async()=>{try{const{userId:s,action:a,targetState:n}=o;alert(`Would ${a} user ${s} to ${n}`),h({show:!1,userId:null,action:null,targetState:null}),l(d(t))}catch(s){console.error("Error updating user:",s),i(s.message||"An error occurred","error")}},k=()=>{h({show:!1,userId:null,action:null,targetState:null})};return e.jsxs("div",{className:"admin-container",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-blue-500 bg-clip-text text-transparent",children:"User Management"}),e.jsxs(A,{to:"/admin",className:"admin-button-secondary",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})]}),e.jsxs("div",{className:"admin-table-container",children:[e.jsx("form",{onSubmit:f,className:"admin-filters",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx("input",{type:"text",name:"search",value:t.search,onChange:u,placeholder:"Search users...",className:"admin-filter-input"})}),e.jsx("div",{className:"w-[150px]",children:e.jsxs("select",{name:"role",value:t.role,onChange:u,className:"admin-filter-input",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"user",children:"User"})]})}),e.jsx("div",{className:"w-[150px]",children:e.jsxs("select",{name:"status",value:t.status,onChange:u,className:"admin-filter-input",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsxs("button",{type:"submit",className:"admin-button",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Filter"]})]})}),b?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):p?e.jsx("div",{className:"admin-error",children:e.jsx("p",{className:"admin-error-message",children:p})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{className:"admin-table-header",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>c("id"),className:"cursor-pointer",children:["ID",t.sortBy==="id"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("name"),className:"cursor-pointer",children:["Name",t.sortBy==="name"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("email"),className:"cursor-pointer",children:["Email",t.sortBy==="email"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("role"),className:"cursor-pointer",children:["Role",t.sortBy==="role"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("status"),className:"cursor-pointer",children:["Status",t.sortBy==="status"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("created_at"),className:"cursor-pointer",children:["Created",t.sortBy==="created_at"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{className:"admin-table-body",children:Array.isArray(j)&&j.map(s=>e.jsxs("tr",{className:"admin-table-row",children:[e.jsx("td",{className:"admin-table-cell",children:s.id}),e.jsx("td",{className:"admin-table-cell",children:s.name}),e.jsx("td",{className:"admin-table-cell",children:s.email}),e.jsx("td",{className:"admin-table-cell",children:e.jsxs("select",{className:"admin-form-input",value:s.role||"user",onChange:()=>N(s.id,"role",s.role==="admin"?"user":"admin"),children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"user",children:"User"})]})}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("span",{className:`status-badge ${s.status||s.is_active===!0?"status-badge-active":"status-badge-inactive"}`,children:s.status||(s.is_active?"active":"inactive")})}),e.jsx("td",{className:"admin-table-cell",children:s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>N(s.id,"status",s.status==="active"||s.is_active===!0?"inactive":"active"),className:s.status==="active"||s.is_active===!0?"admin-button-danger":"admin-button",children:s.status==="active"||s.is_active===!0?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Activate"]})})})})]},s.id))})]})}),r&&e.jsxs("div",{className:"admin-pagination",children:[e.jsx("button",{onClick:()=>r.current_page>1&&v(r.current_page-1),disabled:!r.current_page||r.current_page===1,className:"admin-pagination-button",children:"Previous"}),e.jsxs("span",{className:"text-sm text-slate-700",children:["Page ",r.current_page||1," of ",r.last_page||1]}),e.jsx("button",{onClick:()=>r.current_page<r.last_page&&v(r.current_page+1),disabled:!r.last_page||!r.current_page||r.current_page===r.last_page,className:"admin-pagination-button",children:"Next"})]})]})]}),o.show&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"admin-form max-w-lg w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Action"}),e.jsx("p",{className:"mb-6",children:o.action==="role"?`Are you sure you want to change this user's role to ${o.targetState}?`:`Are you sure you want to ${o.targetState==="active"?"activate":"deactivate"} this user?`}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:k,className:"admin-button-secondary",children:"Cancel"}),e.jsx("button",{onClick:y,className:"admin-button",children:"Confirm"})]})]})})]})};export{L as default};
