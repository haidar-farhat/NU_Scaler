import{u as S,c as m,d as A,r as x,i as d,j as e,L as B,k as L,l as O}from"./index-CjbpYLDV.js";/* empty css              */const D=()=>{const l=S(),N=m(s=>{var a;return((a=s.adminUsers)==null?void 0:a.users)||[]}),b=m(s=>{var a;return((a=s.adminUsers)==null?void 0:a.loading)||!1}),j=m(s=>{var a;return((a=s.adminUsers)==null?void 0:a.error)||null}),r=m(s=>{var a;return((a=s.adminUsers)==null?void 0:a.meta)||null}),{showToast:i}=A(),[t,p]=x.useState({search:"",role:"",status:"",sortBy:"created_at",sortOrder:"desc"}),[o,h]=x.useState({show:!1,userId:null,action:null,targetState:null});x.useEffect(()=>{try{l(d())}catch(s){console.error("Error fetching users:",s),i("Failed to load users","error")}},[l,i]);const u=s=>{const{name:a,value:n}=s.target;p(_=>({..._,[a]:n}))},f=s=>{s.preventDefault();try{l(d(t))}catch(a){console.error("Error applying filters:",a),i("Failed to filter users","error")}},c=s=>{const a=t.sortBy===s&&t.sortOrder==="asc"?"desc":"asc";p(n=>({...n,sortBy:s,sortOrder:a}));try{l(d({...t,sortBy:s,sortOrder:a}))}catch(n){console.error("Error sorting users:",n),i("Failed to sort users","error")}},g=s=>{try{l(d({...t,page:s}))}catch(a){console.error("Error changing page:",a),i("Failed to change page","error")}},v=(s,a,n)=>{h({show:!0,userId:s,action:a,targetState:n})},k=async()=>{try{const{userId:s,action:a,targetState:n}=o;h({show:!1,userId:null,action:null,targetState:null}),a==="role"?await l(L({userId:s,is_admin:n==="admin"})).unwrap():a==="status"&&await l(O({userId:s,is_active:n==="active"})).unwrap(),l(d(t))}catch(s){i(s.message||"An error occurred","error")}},w=()=>{h({show:!1,userId:null,action:null,targetState:null})},y=(s,a)=>{v(s.id,"role",a)},C=(s,a)=>{v(s.id,"status",a)};return e.jsxs("div",{className:"admin-container",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-blue-500 bg-clip-text text-transparent",children:"User Management"}),e.jsxs(B,{to:"/admin",className:"admin-button-secondary",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]})]}),e.jsxs("div",{className:"admin-table-container",children:[e.jsx("form",{onSubmit:f,className:"admin-filters",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsx("input",{type:"text",name:"search",value:t.search,onChange:u,placeholder:"Search users...",className:"admin-filter-input"})}),e.jsx("div",{className:"w-[150px]",children:e.jsxs("select",{name:"role",value:t.role,onChange:u,className:"admin-filter-input",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"moderator",children:"Moderator"}),e.jsx("option",{value:"user",children:"User"})]})}),e.jsx("div",{className:"w-[150px]",children:e.jsxs("select",{name:"status",value:t.status,onChange:u,className:"admin-filter-input",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsxs("button",{type:"submit",className:"admin-button",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Filter"]})]})}),b?e.jsx("div",{className:"admin-loading",children:e.jsx("div",{className:"admin-loading-spinner"})}):j?e.jsx("div",{className:"admin-error",children:e.jsx("p",{className:"admin-error-message",children:j})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"admin-table",children:[e.jsx("thead",{className:"admin-table-header",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>c("id"),className:"cursor-pointer",children:["ID",t.sortBy==="id"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("name"),className:"cursor-pointer",children:["Name",t.sortBy==="name"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("email"),className:"cursor-pointer",children:["Email",t.sortBy==="email"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("role"),className:"cursor-pointer",children:["Role",t.sortBy==="role"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("status"),className:"cursor-pointer",children:["Status",t.sortBy==="status"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsxs("th",{onClick:()=>c("created_at"),className:"cursor-pointer",children:["Created",t.sortBy==="created_at"&&e.jsx("span",{className:"ml-1",children:t.sortOrder==="asc"?"↑":"↓"})]}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{className:"admin-table-body",children:N.map(s=>e.jsxs("tr",{className:"admin-table-row",children:[e.jsx("td",{className:"admin-table-cell",children:s.id}),e.jsx("td",{className:"admin-table-cell",children:s.name}),e.jsx("td",{className:"admin-table-cell",children:s.email}),e.jsx("td",{className:"admin-table-cell",children:e.jsxs("select",{className:"admin-form-input",value:s.is_admin?"admin":"user",onChange:a=>y(s,a.target.value),children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"user",children:"User"})]})}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("span",{className:`status-badge ${s.is_active?"status-badge-active":"status-badge-inactive"}`,children:s.is_active?"active":"inactive"})}),e.jsx("td",{className:"admin-table-cell",children:s.created_at?new Date(s.created_at).toLocaleDateString():"N/A"}),e.jsx("td",{className:"admin-table-cell",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>C(s,s.is_active?"inactive":"active"),className:s.is_active?"admin-button-danger":"admin-button",children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Activate"]})})})})]},s.id))})]})}),r&&e.jsxs("div",{className:"admin-pagination",children:[e.jsx("button",{onClick:()=>r.current_page>1&&g(r.current_page-1),disabled:!r.current_page||r.current_page===1,className:"admin-pagination-button",children:"Previous"}),e.jsxs("span",{className:"text-sm text-slate-700",children:["Page ",r.current_page||1," of ",r.last_page||1]}),e.jsx("button",{onClick:()=>r.current_page<r.last_page&&g(r.current_page+1),disabled:!r.last_page||!r.current_page||r.current_page===r.last_page,className:"admin-pagination-button",children:"Next"})]})]})]}),o.show&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"admin-form max-w-lg w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Action"}),e.jsx("p",{className:"mb-6",children:o.action==="role"?`Are you sure you want to change this user's role to ${o.targetState}?`:`Are you sure you want to ${o.targetState==="active"?"activate":"deactivate"} this user?`}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:w,className:"admin-button-secondary",children:"Cancel"}),e.jsx("button",{onClick:k,className:"admin-button",children:"Confirm"})]})]})})]})};export{D as default};
